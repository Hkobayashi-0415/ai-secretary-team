# Phase 7: UI/UX設計書 - ワークフロー管理画面設計

## 1. 設計概要

### 1.1 設計目的
統合版プラットフォームのワークフロー管理画面において、vibe-kanbanの概念を活用し、タスクの可視化・管理・追跡を直感的に行い、チーム全体の作業効率を最大化するインターフェースを設計する。

### 1.2 画面の役割
- **タスク可視化**: カンバンボード・リスト・ガントチャートでの多角的表示
- **ワークフロー管理**: タスクの状態遷移・依存関係・優先度管理
- **チーム協調**: メンバー間のタスク割り当て・コミュニケーション
- **進捗追跡**: リアルタイム進捗・ボトルネック・リスク管理
- **AI秘書連携**: 自動タスク生成・優先度提案・進捗分析

### 1.3 対象ユーザー
- **プライマリ**: プロジェクトマネージャー・開発リーダー・チームリーダー
- **セカンダリ**: 開発者・テスター・デザイナー
- **管理者**: ワークフロー管理者・品質管理者

## 2. 画面構成設計

### 2.1 全体レイアウト
**画面構造**:
```
┌─────────────────────────────────────────────────────────┐
│ ヘッダーナビゲーション (64px)                          │
├─────────────────┬───────────────────────────────────────┤
│ サイドバー      │ メインコンテンツエリア                │
│ ナビゲーション  │                                      │
│ (280px)        │  ┌─────────────────────────────────┐ │
│                 │  │ ブレッドクラム (40px)           │ │
│                 │  ├─────────────────────────────────┤ │
│                 │  │ ワークフロー管理コンテンツ      │ │
│                 │  │                                 │ │
│                 │  │ ┌─────────┐ ┌─────────┐        │ │
│                 │  │ │表示     │ │新規     │        │ │
│                 │  │ │切替     │ │タスク   │        │ │
│                 │  │ └─────────┘ └─────────┘        │ │
│                 │  │                                 │ │
│                 │  │ ┌─────────────────────────────┐ │ │
│                 │  │ │ メイン表示エリア            │ │ │
│                 │  │ │ (カンバン・リスト・ガント)  │ │ │
│                 │  │ └─────────────────────────────┘ │ │
│                 │  │                                 │ │
│                 │  │ ┌─────────────────────────────┐ │ │
│                 │  │ │ タスク詳細パネル            │ │ │
│                 │  │ └─────────────────────────────┘ │ │
│                 │  └─────────────────────────────────┘ │
└─────────────────┴───────────────────────────────────────┘
```

**レスポンシブ対応**:
- **デスクトップ**: サイドバー展開・メインコンテンツフル幅・詳細パネル表示
- **タブレット**: サイドバー折りたたみ・メインコンテンツ適応・詳細パネル省略
- **モバイル**: サイドバーオーバーレイ・メインコンテンツ単一カラム・詳細パネルモーダル

### 2.2 ヘッダーエリア
**高さ**: 64px（固定）
**背景色**: #FFFFFF（ライトモード）、#1F2937（ダークモード）
**境界線**: 下側に1px #E5E7EB
**シャドウ**: 0 1px 3px 0 rgba(0, 0, 0, 0.1)

**構成要素**:
- **ロゴ・ブランド名**: 左端、32x32px、マージン右側24px
- **グローバルナビゲーション**: 中央、メニュー項目間隔24px
- **通知ベル**: 右端、24x24px、通知数バッジ表示
- **ユーザーメニュー**: 右端、24x24px、ドロップダウンメニュー

### 2.3 サイドバーナビゲーション
**幅**: 280px（展開時）、64px（折りたたみ時）
**背景色**: #F9FAFB（ライトモード）、#111827（ダークモード）
**境界線**: 右側に1px #E5E7EB
**高さ**: 100vh
**z-index**: 900

**メニュー構成**:
```
ワークフロー管理
├── カンバンボード
├── リスト表示
├── ガントチャート
├── マイタスク
├── チームタスク
├── テンプレート
└── 設定
    ├── カラム設定
    ├── ステータス管理
    ├── 優先度管理
    ├── ラベル管理
    └── 通知設定
```

**メニュー項目仕様**:
- **高さ**: 48px
- **パディング**: 12px 16px
- **フォント**: 16px、フォントウェイト500
- **色**: #374151
- **ホバー背景**: #F3F4F6
- **アクティブ背景**: #EFF6FF
- **アクティブ色**: #1E40AF

### 2.4 ブレッドクラム
**高さ**: 40px
**背景色**: #F9FAFB
**境界線**: 下側に1px #E5E7EB
**パディング**: 0 24px
**フォント**: 14px、フォントウェイト400

**表示内容**:
- **現在位置**: ワークフロー管理
- **ナビゲーション**: ホーム > ワークフロー管理
- **アクション**: なし（現在位置のみ）

## 3. メインコンテンツエリア

### 3.1 表示切替・アクションセクション
**レイアウト**: 横並び（レスポンシブ対応）
**マージン**: 24px
**高さ**: 80px

#### 3.1.1 表示切替タブ
**用途**: カンバンボード・リスト・ガントチャートの表示切替
**デザイン仕様**:
- **背景色**: #FFFFFF
- **境界線**: 下側に1px #E5E7EB
- **パディング**: 0 24px

**タブ構成**:
- **カンバンボード**: アイコン + テキスト、アクティブ時は下線表示
- **リスト表示**: アイコン + テキスト、アクティブ時は下線表示
- **ガントチャート**: アイコン + テキスト、アクティブ時は下線表示

**タブ仕様**:
- **高さ**: 48px
- **パディング**: 12px 16px
- **フォント**: 16px、フォントウェイト500
- **色**: #6B7280（非アクティブ）、#3B82F6（アクティブ）
- **アクティブ下線**: 2px #3B82F6

#### 3.1.2 新規タスクボタン
**用途**: 新規タスク作成の開始
**デザイン仕様**:
- **ボタンタイプ**: プライマリボタン
- **高さ**: 48px
- **幅**: 200px（デスクトップ）、150px（タブレット）、100%（モバイル）
- **アイコン**: 左側、20x20px、プラス記号
- **テキスト**: 「新規タスク」
- **ホバー効果**: 背景色変化・シャドウ増加

#### 3.1.3 フィルター・検索機能
**用途**: タスクの絞り込み・検索
**デザイン仕様**:
- **背景色**: #FFFFFF
- **境界線**: 1px #D1D5DB
- **フォーカス境界線**: 2px #3B82F6
- **角丸**: 8px
- **パディング**: 12px 16px
- **幅**: 300px（デスクトップ）、250px（タブレット）、100%（モバイル）
- **プレースホルダー**: 「タスク名、説明、担当者で検索...」

**フィルター項目**:
- **ステータス**: 全ステータス・特定ステータス
- **優先度**: 全優先度・高・中・低
- **担当者**: 全員・特定メンバー・未割り当て
- **期限**: 期限なし・期限あり・期限切れ・今週・今月

### 3.2 カンバンボード表示セクション
**レイアウト**: フル幅
**マージン**: 24px
**高さ**: 適応的（最小600px）

#### 3.2.1 カンバンボードレイアウト
**用途**: タスクの状態別可視化・管理
**デザイン仕様**:
- **背景色**: #F9FAFB
- **境界線**: 1px #E5E7EB
- **角丸**: 12px
- **パディング**: 24px

**カラム構成**:
- **To Do**: 背景色 #F9FAFB、境界線 #E5E7EB、幅300px
- **In Progress**: 背景色 #EFF6FF、境界線 #3B82F6、幅300px
- **Review**: 背景色 #FEF3C7、境界線 #F59E0B、幅300px
- **Done**: 背景色 #F0FDF4、境界線 #10B981、幅300px

**カラムヘッダー**:
- **タイトル**: 18px、フォントウェイト600、色 #111827
- **タスク数**: 14px、色 #6B7280、右側配置
- **追加ボタン**: 右側、アイコンボタン、24x24px

#### 3.2.2 タスクカード
**用途**: 個別タスクの表示・編集・移動
**デザイン仕様**:
- **背景色**: #FFFFFF
- **境界線**: 1px #E5E7EB
- **角丸**: 8px
- **パディング**: 16px
- **マージン**: 下側12px
- **シャドウ**: 0 1px 3px 0 rgba(0, 0, 0, 0.1)
- **ホバーシャドウ**: 0 4px 6px -1px rgba(0, 0, 0, 0.1)

**カード内容**:
- **タイトル**: 16px、フォントウェイト600、色 #111827、2行まで表示
- **説明**: 14px、色 #6B7280、3行まで表示
- **担当者**: アバター、名前、12px、色 #374151
- **優先度**: 色付きバッジ（高・中・低）、右上配置
- **期限**: 14px、色 #6B7280、アイコン付き
- **ラベル**: 色付きチップ、複数表示可能
- **添付ファイル**: アイコン、件数表示

**優先度バッジ**:
- **高**: 背景色 #FEF2F2、テキスト色 #991B1B、境界線 #EF4444
- **中**: 背景色 #FEF3C7、テキスト色 #92400E、境界線 #F59E0B
- **低**: 背景色 #F0FDF4、テキスト色 #166534、境界線 #10B981

**ラベルチップ**:
- **開発**: 背景色 #EFF6FF、テキスト色 #1E40AF
- **設計**: 背景色 #F0FDF4、テキスト色 #166534
- **テスト**: 背景色 #FEF3C7、テキスト色 #92400E
- **バグ**: 背景色 #FEF2F2、テキスト色 #991B1B

#### 3.2.3 ドラッグ&ドロップ機能
**用途**: タスクの状態変更・優先度変更
**デザイン仕様**:
- **ドラッグ中**: カードの透明度50%、シャドウ増加
- **ドロップ可能エリア**: 境界線ハイライト、背景色変化
- **ドロップ不可能エリア**: 境界線赤色、背景色 #FEF2F2
- **アニメーション**: スムーズな移動、0.3秒

**ドラッグ&ドロップ制約**:
- **状態変更**: カラム間での移動
- **優先度変更**: 同一カラム内での順序変更
- **制限事項**: 完了タスクの戻し不可、権限チェック

### 3.3 リスト表示セクション
**レイアウト**: フル幅
**マージン**: 24px
**高さ**: 適応的（最小600px）

#### 3.3.1 リストテーブル
**用途**: タスクの詳細情報・一括操作
**デザイン仕様**:
- **背景色**: #FFFFFF
- **境界線**: 1px #E5E7EB
- **角丸**: 12px
- **シャドウ**: 0 1px 3px 0 rgba(0, 0, 0, 0.1)

**列構成**:
- **選択**: チェックボックス、幅40px
- **タスク名**: 幅300px、左寄せ、ソート可能
- **ステータス**: 幅120px、中央揃え、ソート可能
- **優先度**: 幅100px、中央揃え、ソート可能
- **担当者**: 幅150px、中央揃え、ソート可能
- **期限**: 幅120px、中央揃え、ソート可能
- **進捗**: 幅120px、中央揃え、ソート可能
- **アクション**: 幅100px、中央揃え、固定

#### 3.3.2 一括操作機能
**用途**: 複数タスクの一括編集・削除・移動
**デザイン仕様**:
- **選択状態**: チェックボックス選択時のハイライト
- **一括操作バー**: 選択時のみ表示、上部固定
- **操作ボタン**: 編集・削除・移動・ステータス変更

**一括操作バー**:
- **背景色**: #EFF6FF
- **境界線**: 下側に1px #3B82F6
- **パディング**: 16px 24px
- **高さ**: 64px

### 3.4 ガントチャート表示セクション
**レイアウト**: フル幅
**マージン**: 24px
**高さ**: 適応的（最小600px）

#### 3.4.1 ガントチャートレイアウト
**用途**: タスクの時系列・依存関係表示
**デザイン仕様**:
- **背景色**: #FFFFFF
- **境界線**: 1px #E5E7EB
- **角丸**: 12px
- **シャドウ**: 0 1px 3px 0 rgba(0, 0, 0, 0.1)
- **パディング**: 24px

**時間軸**:
- **表示単位**: 日・週・月・四半期・年
- **ズーム機能**: 時間軸の拡大・縮小
- **パン機能**: 時間軸の左右移動
- **今日マーカー**: 赤い縦線での現在日表示

#### 3.4.2 タスクバー
**用途**: 個別タスクの期間・進捗表示
**デザイン仕様**:
- **高さ**: 32px
- **角丸**: 4px
- **マージン**: 下側8px

**タスクバー種類**:
- **進行中**: 背景色 #3B82F6、境界線 #1D4ED8
- **完了**: 背景色 #10B981、境界線 #059669
- **遅延**: 背景色 #EF4444、境界線 #DC2626
- **一時停止**: 背景色 #F59E0B、境界線 #D97706

**進捗表示**:
- **進捗バー**: タスクバー内の進捗表示
- **進捗色**: 白い境界線、進捗率表示
- **完了マーカー**: 右端のチェックマーク

#### 3.4.3 依存関係表示
**用途**: タスク間の依存関係・クリティカルパス
**デザイン仕様**:
- **依存線**: 2px、色 #6B7280、点線
- **クリティカルパス**: 2px、色 #EF4444、実線
- **依存関係タイプ**:
  - **完了開始**: 矢印 + 円形マーカー
  - **開始開始**: 矢印 + 四角形マーカー
  - **完了完了**: 矢印 + 三角形マーカー

### 3.5 タスク詳細パネルセクション
**レイアウト**: 右側スライドイン（デスクトップ）、モーダル（モバイル）
**幅**: 400px（デスクトップ）、100%（モバイル）
**高さ**: 100vh（デスクトップ）、適応的（モバイル）

#### 3.5.1 パネルヘッダー
**用途**: タスク基本情報・アクション
**デザイン仕様**:
- **背景色**: #FFFFFF
- **境界線**: 下側に1px #E5E7EB
- **パディング**: 24px

**構成要素**:
- **タスク名**: 20px、フォントウェイト600、色 #111827
- **ステータス**: バッジ形式、右側配置
- **閉じるボタン**: 右上、24x24px、色 #6B7280
- **編集ボタン**: 右側、セカンダリボタン

#### 3.5.2 基本情報セクション
**用途**: タスクの基本情報表示・編集
**デザイン仕様**:
- **背景色**: #FFFFFF
- **パディング**: 24px

**情報項目**:
- **説明**: 16px、色 #374151、マージン下側16px
- **優先度**: 14px、色 #6B7280、バッジ形式
- **担当者**: アバター、名前、14px、色 #374151
- **期限**: 14px、色 #6B7280、アイコン付き
- **作成日**: 14px、色 #6B7280
- **更新日**: 14px、色 #6B7280

#### 3.5.3 進捗・時間セクション
**用途**: タスクの進捗状況・時間管理
**デザイン仕様**:
- **背景色**: #F9FAFB
- **境界線**: 1px #E5E7EB
- **角丸**: 8px
- **パディング**: 20px
- **マージン**: 24px

**進捗表示**:
- **全体進捗**: プログレスバー、パーセンテージ表示
- **時間進捗**: 予定時間・実績時間・残り時間
- **サブタスク**: 完了・進行中・未着手の数値表示

#### 3.5.4 コメント・履歴セクション
**用途**: タスクのコメント・変更履歴表示
**デザイン仕様**:
- **背景色**: #FFFFFF
- **パディング**: 24px

**コメント機能**:
- **コメント入力**: テキストエリア、送信ボタン
- **コメント表示**: 日時・投稿者・内容
- **変更履歴**: ステータス変更・担当者変更・期限変更

## 4. インタラクション設計

### 4.1 ユーザー操作フロー

#### 4.1.1 タスク作成フロー
**開始**: 新規タスクボタンクリック
**フロー**:
1. ボタンクリック → タスク作成モーダル表示
2. 基本情報入力 → リアルタイムバリデーション
3. 担当者・期限設定 → カレンダー・ユーザー選択
4. ラベル・優先度設定 → カスタマイズ可能
5. 確認・作成 → 成功メッセージ・カンバン反映

**UI要件**:
- **モーダル**: 幅600px、高さ適応的
- **フォーム**: 必須項目の明確な表示
- **バリデーション**: リアルタイム・エラー表示
- **プレビュー**: 作成後のカードイメージ表示

#### 4.1.2 タスク編集フロー
**開始**: タスクカード・詳細パネルの編集ボタンクリック
**フロー**:
1. 編集ボタンクリック → インライン編集モード
2. 情報編集 → リアルタイム保存・バリデーション
3. 変更確認 → 変更内容のハイライト表示
4. 保存完了 → 成功メッセージ・更新反映

**UI要件**:
- **インライン編集**: 直接編集・即座保存
- **変更表示**: 変更前後の比較表示
- **保存状態**: 保存中・保存完了・エラー状態

#### 4.1.3 タスク移動フロー
**開始**: タスクカードのドラッグ開始
**フロー**:
1. ドラッグ開始 → カードの視覚的変化
2. ドラッグ中 → ドロップ可能エリアのハイライト
3. ドロップ → 状態変更・関連更新
4. 完了確認 → 成功メッセージ・画面更新

**UI要件**:
- **ドラッグ状態**: 透明度・シャドウ変化
- **ドロップ可能**: 境界線・背景色変化
- **アニメーション**: スムーズな移動・状態変化

### 4.2 フィードバック・状態表示

#### 4.2.1 即座フィードバック
**ボタンクリック**:
- 視覚的変化（色・影・変形）
- ローディング状態の表示
- 無効化（重複クリック防止）

**ドラッグ&ドロップ**:
- ドロップ可能エリアのハイライト
- 移動中のプレビュー表示
- 成功・失敗の視覚的フィードバック

**フォーム入力**:
- リアルタイムバリデーション
- エラー・成功状態の表示
- 文字数・制限の表示

#### 4.2.2 遅延フィードバック
**データ読み込み**:
- スケルトンローダー表示
- プログレスバー・スピナー
- 読み込み状態の明確な表示

**処理実行**:
- 進行状況の表示
- 残り時間の推定
- キャンセル・中断の可能

**完了・エラー**:
- 成功メッセージ・トースト通知
- エラーメッセージ・解決案提示
- 次のアクションの案内

### 4.3 状態管理

#### 4.3.1 画面状態
**初期状態**:
- ローディング表示
- データの段階的読み込み
- エラー状態の適切な処理

**更新状態**:
- リアルタイム更新の表示
- 変更の視覚的ハイライト
- 更新履歴の表示

**エラー状態**:
- エラーメッセージの表示
- 再試行・代替案の提示
- ユーザーサポートへの案内

#### 4.3.2 データ状態
**キャッシュ管理**:
- 適切なキャッシュ戦略
- データの鮮度表示
- 手動更新の提供

**同期状態**:
- オンライン・オフライン状態
- データ同期の進行状況
- 競合解決の支援

## 5. レスポンシブデザイン

### 5.1 ブレークポイント対応

#### 5.1.1 デスクトップ（1025px以上）
**レイアウト**:
- サイドバー展開（280px）
- メインコンテンツフル幅
- 詳細パネル右側表示
- 全機能表示

**カンバンボード**:
- 4カラム表示
- フル機能・詳細表示
- ドラッグ&ドロップ完全対応

#### 5.1.2 タブレット（769px - 1024px）
**レイアウト**:
- サイドバー折りたたみ（64px）
- メインコンテンツ適応幅
- 詳細パネル右側表示
- 主要機能表示

**カンバンボード**:
- 3カラム表示
- 基本機能・中程度詳細
- ドラッグ&ドロップ基本対応

#### 5.1.3 モバイル（320px - 768px）
**レイアウト**:
- サイドバーオーバーレイ
- メインコンテンツ単一カラム
- 詳細パネルモーダル表示
- 基本機能表示

**カンバンボード**:
- 2カラム表示
- 基本機能・簡略表示
- タップ操作中心

### 5.2 コンテンツ調整

#### 5.2.1 カンバンボード
**デスクトップ**: 4カラム、フル機能、詳細表示
**タブレット**: 3カラム、基本機能、中程度詳細
**モバイル**: 2カラム、基本機能、簡略表示

#### 5.2.2 リスト表示
**デスクトップ**: 全列表示、詳細情報
**タブレット**: 主要列表示、基本情報
**モバイル**: 重要列表示、簡略情報

#### 5.2.3 ガントチャート
**デスクトップ**: フル機能、詳細表示
**タブレット**: 基本機能、中程度詳細
**モバイル**: 基本機能、簡略表示

## 6. アクセシビリティ設計

### 6.1 キーボード操作
**Tab順序**:
- 論理的な順序での移動
- サイドバー → メインコンテンツ → アクション
- カスタムTab順序の設定

**ショートカットキー**:
- Ctrl+N: 新規タスク
- Ctrl+F: 検索フォーカス
- Ctrl+E: 編集モード
- Ctrl+S: 保存
- Ctrl+Z: 元に戻す
- 矢印キー: カンバン内移動

**フォーカス管理**:
- 明確なフォーカスインジケーター
- フォーカスの適切な移動
- フォーカスの復元

### 6.2 スクリーンリーダー対応
**セマンティックHTML**:
- 適切な見出し階層（h1-h6）
- リスト要素（ul, ol, li）
- テーブル要素（table, th, td）
- フォーム要素（label, fieldset, legend）

**ARIA属性**:
- aria-label: 要素の説明
- aria-describedby: 詳細説明の関連付け
- aria-expanded: 展開・折りたたみ状態
- aria-selected: 選択状態
- aria-live: 動的更新の通知
- aria-dropped: ドロップ状態

**ランドマーク**:
- main: メインコンテンツ
- navigation: ナビゲーション
- sidebar: サイドバー
- contentinfo: フッター情報

### 6.3 色覚対応
**コントラスト比**:
- 通常テキスト: 4.5:1以上
- 大テキスト: 3:1以上
- UI要素: 3:1以上

**色以外の情報伝達**:
- アイコン・形状での識別
- テキストでの状態説明
- 境界線・パターンでの区別

## 7. パフォーマンス設計

### 7.1 表示パフォーマンス
**レンダリング最適化**:
- 仮想化（長いリスト・大量データ）
- 遅延読み込み・遅延レンダリング
- メモ化（計算結果・関数）

**データ最適化**:
- 適切なキャッシュ戦略
- バックグラウンド更新
- エラーハンドリング

### 7.2 操作パフォーマンス
**入力応答性**:
- 即座フィードバック（100ms以内）
- 適切なローディング表示
- 非同期処理の活用

**アニメーション**:
- 60fps維持
- 適切なアニメーション時間
- ハードウェアアクセラレーション

## 8. 実装ガイドライン

### 8.1 コンポーネント設計
**再利用性**:
- 汎用的なプロパティ設計
- 適切なデフォルト値の設定
- カスタマイズ可能なスタイル

**保守性**:
- 明確な責任分離
- 適切な抽象化レベル
- テスト容易性の確保

### 8.2 データ管理
**状態管理**:
- 適切な状態の配置
- 状態更新の最適化
- 非同期処理の適切な管理

**API連携**:
- 効率的なデータ取得
- エラーハンドリングの統一
- キャッシュ戦略の実装

### 8.3 テスト・品質保証
**コンポーネントテスト**:
- レンダリングテスト
- プロパティテスト
- イベントハンドリングテスト

**E2Eテスト**:
- ユーザー操作フローのテスト
- レスポンシブ対応の確認
- アクセシビリティの確認

## 9. 結論

### 9.1 設計の総括
本ワークフロー管理画面設計書により、統合版プラットフォームのワークフロー管理が以下の特性を備えた直感的なインターフェースとして構築されます：

- **可視性**: タスクの状態・進捗・依存関係の一目での把握
- **効率性**: ドラッグ&ドロップ・一括操作による効率的な管理
- **一貫性**: 統一されたデザイン言語・操作感
- **アクセシビリティ**: 多様なユーザーの利用を支援

### 9.2 実装への指針
1. **段階的実装**: 基本レイアウト → カンバンボード → リスト・ガント → インタラクション
2. **品質保証**: 継続的テスト・アクセシビリティ確認・パフォーマンス監視
3. **ユーザビリティ**: ユーザーテスト・フィードバック収集・継続改善

### 9.3 最終的な設計目標達成
この設計により、AI秘書チームの協調作業を支える、世界最高水準のワークフロー管理システムが実現されます。
